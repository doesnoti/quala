"use strict";const ROOTS=getComputedStyle(document.documentElement),HOVERTIME=getNumber(ROOTS.getPropertyValue("--hover-time")),ANIMTIME=getNumber(ROOTS.getPropertyValue("--anim-time"));let isAnimating=!1,curMobile=isMobile(),curSlider=innerWidth<=650;const header=document.querySelector(".header");let menuBtn="";header&&(menuBtn=header.querySelector(".menu-button"));const menu=document.querySelector(".menu__popup");let headerHeight="";header&&(headerHeight=getHeaderHeight());const scrollElems=document.querySelectorAll(".js-anim");let mouseX=0,mouseY=0,isRayAnimating=!1;function changeDevice(){curMobile!=isMobile()&&(curMobile=!curMobile,headerHeight=getHeaderHeight())}function headerBackgroundColor(){const e=document.querySelector(".mainscreen__link");pageYOffset>0?(header.classList.add("fill"),e.classList.remove("visible")):(header.classList.remove("fill"),e.classList.add("visible"))}function scrollAnimations(){const e=innerHeight/10;scrollElems.forEach(t=>{const n=t.getBoundingClientRect();n.top+e<innerHeight&&n.bottom-headerHeight-e>0?(t.classList.add("animated"),setTimeout(()=>t.classList.add("ready"),ANIMTIME)):(t.classList.remove("ready"),t.classList.remove("animated"))})}function svgStrokeInit(){document.querySelectorAll(".svg__stroke").forEach(e=>{const t=Math.ceil(e.getTotalLength());e.style.strokeDasharray=t+"px",e.style.strokeDashoffset=t+"px"})}function navCurSection(){const e=document.querySelectorAll(".nav"),t=document.querySelectorAll(".section");let n=!1;t.forEach(t=>{if(n)return;const i=t.getBoundingClientRect();-i.top+headerHeight<i.height&&(e.forEach(e=>{e.querySelectorAll(".anchor-link").forEach(n=>{n.href.split("#")[1]===t.id&&(n.classList.contains("active")||(e.querySelector(".active")&&e.querySelector(".active").classList.remove("active"),n.classList.add("active")))})}),n=!0)})}function navCurFeatures(){const e=document.querySelector(".features"),t=e.querySelector(".features__nav"),n=e.querySelector(".features__counter"),i=e.querySelectorAll(".features__card");let r=!1;i.forEach(e=>{if(r)return;const i=e.getBoundingClientRect();if(-i.top+headerHeight<i.height){const i=t.querySelectorAll(".anchor-link"),s=n.querySelectorAll(".anchor-link");i.forEach(n=>{n.href.split("#")[1]===e.id&&(n.parentNode.classList.contains("active")||(t.querySelector(".active")&&t.querySelector(".active").classList.remove("active"),n.parentNode.classList.add("active")))}),s.forEach(t=>{t.href.split("#")[1]===e.id&&(t.parentNode.classList.contains("active")||(n.querySelector(".active")&&n.querySelector(".active").classList.remove("active"),t.parentNode.classList.add("active")))}),r=!0}})}function logoAnimInit(){document.querySelectorAll(".logo").forEach(e=>e.addEventListener("click",()=>logoAnim(e))),headerLogo()}function logoAnim(e){const t=e.querySelector(".logo__hexagon");t.classList.contains("animating")||(t.classList.add("animating"),setTimeout(()=>t.classList.remove("animating"),ANIMTIME))}function headerLogo(){const e=document.querySelector(".header__logo"),t=document.querySelector(".mainscreen__logo"),n=document.querySelector(".footer__logo");let i=!1;const r={attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1},s=new MutationObserver(()=>{t.classList.contains("animated")||n.classList.contains("animated")||i?t.classList.contains("animated")&&i&&(i=!1,e.classList.remove("animated")):(i=!0,e.classList.add("animated"))}),a=new MutationObserver(()=>{t.classList.contains("animated")||n.classList.contains("animated")||i?n.classList.contains("animated")&&i&&(i=!1,e.classList.remove("animated")):(i=!0,e.classList.add("animated"))});s.observe(t,r),a.observe(n,r)}function anchorLinksInit(){document.querySelectorAll(".anchor-link").forEach(e=>e.addEventListener("click",t=>anchor(t,e)))}function anchor(e,t){e.preventDefault();let n=t.dataset.offset?innerHeight/t.dataset.offset:0,i=t.href;i=i.split("#")[1];let r=document.querySelector("#"+i);"features"===i&&(r=r.querySelector(".features__body"),n=innerHeight/5);const s=r.getBoundingClientRect().top+pageYOffset-n-headerHeight;menu.classList.contains("show")&&menu.classList.remove("show"),window.scrollTo({top:s,behavior:"smooth"})}function stickyBehaviour(){if(isMobile())return;document.querySelectorAll(".sticky__container").forEach(e=>{const t=e.querySelector(".sticky");let n=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom,r=e.getBoundingClientRect().top,s=e.getBoundingClientRect().bottom;n<=headerHeight?(t.classList.add("fixed"),i>=s&&t.classList.add("bot"),n<r&&t.classList.remove("fixed")):t.classList.remove("bot")})}function mainscreenRectInit(){mainscreenRectAnim(document.querySelector(".mainscreen__list").querySelectorAll(".mainscreen__list-item"),0)}function mainscreenRectAnim(e,t){document.documentElement.style.setProperty("--mainscreen-rect-pos",e[t].offsetTop+"px"),t=++t===e.length?0:t,requestAnimationFrame(()=>setTimeout(()=>mainscreenRectAnim(e,t),2e3+HOVERTIME))}function heartInit(){const e=document.querySelector(".intro__robot"),t=e.querySelector(".robot__heart"),n=e.querySelector(".robot__trajectory");let i=!1,r=!1;t.offset=n.getPointAtLength(n.getTotalLength()).x,t.height=t.getBBox().height;new MutationObserver(()=>{e.classList.contains("ready")&&!r?(r=!0,heartPrepare(t,n),s.start(2e3)):!e.classList.contains("ready")&&r&&(r=!1,s.finish())}).observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1});const s={start:function(e){i=!1,this.duration=e,this.tZero=Date.now(),heartPrepare(t,n),this.run()},run:function(){if(i)return;let e=Math.min((Date.now()-this.tZero)/this.duration,1);e<1?requestAnimationFrame(()=>this.run()):this.restart(),heartMove(t,n,e)},restart:function(){setTimeout(()=>{heartFadeout(t),setTimeout(()=>this.start(this.duration),1e3+ANIMTIME)},300)},finish:function(){i=!0,heartFadeout(t)}}}function heartPrepare(e,t){e.classList.remove("transition");const n=t.getPointAtLength(0);e.setAttribute("transform",`translate(${n.x-e.offset}, ${n.y-e.height/2})`),e.style.opacity=1,e.style.visibility="visible"}function heartMove(e,t,n){const i=t.getPointAtLength(n*t.getTotalLength());e.setAttribute("transform",`translate(${i.x-e.offset}, ${i.y-e.height/2})`)}function heartFadeout(e){e.classList.add("transition"),e.style.opacity=0,e.style.visibility="hidden"}function runClientsInit(){const e=document.querySelector(".clients");e.addEventListener("mousemove",e=>clientsMouse(e)),runClients(e)}function clientsMouse(e){e.sourceCapabilities.firesTouchEvents||(mouseX=e.clientX,mouseY=e.clientY)}function runClients(e){const t=30;e.querySelectorAll(".clients__img").forEach(e=>{let n=!1;const i=e.getBoundingClientRect();if(mouseY<i.bottom&&Math.abs(mouseY-i.top)<t){if(isInsideCircle(closestPoint(mouseX,i.left,i.right),i.top,mouseX,mouseY,t)){let r=isInsideCircle(mouseX,i.top,mouseX,mouseY,t);r.y=r.y<0?-r.y+t:r.y;let s=r.x+getTranslateX(e),a=r.y+getTranslateY(e);s=Math.abs(s)>75?75:s,a=Math.abs(a)>75?75:a,requestAnimationFrame(()=>e.style.transform=`translate(${s}px, ${a}px)`),n=!0}}if(mouseX>i.left&&Math.abs(mouseX-i.right)<t){let r=closestPoint(mouseY,i.top,i.bottom);if(isInsideCircle(i.right,r,mouseX,mouseY,t)){let s=isInsideCircle(i.right,r,mouseX,mouseY,t);s.x=s.x>0?-s.x-t:s.x;let a=s.x+getTranslateX(e),o=s.y+getTranslateY(e);a=Math.abs(a)>75?75:a,o=Math.abs(o)>75?75:o,requestAnimationFrame(()=>e.style.transform=`translate(${a}px, ${o}px)`),n=!0}}if(mouseY>i.top&&Math.abs(mouseY-i.bottom)<t){if(isInsideCircle(closestPoint(mouseX,i.left,i.right),i.bottom,mouseX,mouseY,t)){let r=isInsideCircle(mouseX,i.bottom,mouseX,mouseY,t);r.y=r.y>0?-r.y-t:r.y;let s=r.x+getTranslateX(e),a=r.y+getTranslateY(e);s=Math.abs(s)>75?75:s,a=Math.abs(a)>75?75:a,requestAnimationFrame(()=>e.style.transform=`translate(${s}px, ${a}px)`),n=!0}}if(mouseX<i.right&&Math.abs(mouseX-i.left)<t){let r=closestPoint(mouseY,i.top,i.bottom);if(isInsideCircle(i.left,r,mouseX,mouseY,t)){let s=isInsideCircle(i.left,r,mouseX,mouseY,t);s.x=s.x<0?-s.x+t:s.x;let a=s.x+getTranslateX(e),o=s.y+getTranslateY(e);a=Math.abs(a)>75?75:a,o=Math.abs(o)>75?75:o,requestAnimationFrame(()=>e.style.transform=`translate(${a}px, ${o}px)`),n=!0}}if(!n){let t=getTranslateX(e)/1.05,n=getTranslateY(e)/1.05;t=t<2?0:t,n=n<2?0:n,t=Math.max(t,3),n=Math.max(n,3),e.style.transform=`translate(${t}px, ${n}px)`}}),requestAnimationFrame(()=>runClients(e))}function clientHomeostasis(e){e.querySelectorAll(".clients__img").forEach(e=>{if(getTranslateX(e)+getTranslateY(e)!==0){let t=getTranslateX(e)/1.1,n=getTranslateY(e)/1.1;t=t<5?0:t,n=n<5?0:n,e.style.transform=`translate(${t}px, ${n}px)`}}),requestAnimationFrame(()=>clientHomeostasis(e))}function closestPoint(e,t,n){return e<t?t:e>n?n:e}function isInsideCircle(e,t,n,i,r){let s={};s.x=e-n,s.y=t-i;const a=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2));if(a<r){const e=s.y/a,t=s.x/a;let n={};return n.vec=r-a,n.x=n.vec*t,n.y=n.vec*e,n}return!1}function wavesInit(){const e=[0,6,10,14],t=[4,8,12],n=document.querySelector(".wave-top__path");n.path=splitSvgPath(n.getAttribute("d")),n.pointDir=[],n.pointSpeed=[],n.referDir=[],n.referSpeed=[],n.offset=[];let i=-1;for(let t of e)n.pointDir[t]=i,n.pointSpeed[t]=.2*Math.random()+.2,i=-i;n.referDir[2]=-1,n.offset[2]=0,n.referSpeed[2]=Math.random()*(.6-.4)+.4,i=1;for(let e of t)n.referDir[e]=i,n.offset[e]=0,n.referSpeed[e]=Math.random()*(.6-.4)+.4,i=-i;const r=[1,7,11,15],s=[5,9,13],a=document.querySelector(".wave-bot__path");a.path=splitSvgPath(a.getAttribute("d")),a.pointDir=[],a.pointSpeed=[],a.referDir=[],a.referSpeed=[],a.offset=[],i=-1;for(let e of r)a.pointDir[e]=i,a.pointSpeed[e]=.2*Math.random()+.2,i=-i;a.referDir[3]=-1,a.offset[3]=0,a.referSpeed[3]=Math.random()*(.6-.4)+.4,i=1;for(let e of s)a.referDir[e]=i,a.offset[e]=0,a.referSpeed[e]=Math.random()*(.6-.4)+.4,i=-i;animWave(n,e,t),animWave(a,r,s)}function animWave(e,t,n){let i=75,r=110,s=150;e.classList.contains("wave-bot__path")&&(i=50,r=30,s=70);for(let n of t)e.path[n]+=e.pointSpeed[n]*e.pointDir[n],(e.path[n]>=s||e.path[n]<=r)&&(e.path[n]=e.path[n]>s?s:r,e.pointDir[n]=-e.pointDir[n],e.pointSpeed[n]=.2*Math.random()+.2);let a=2;e.classList.contains("wave-bot__path")&&a++,e.offset[a]+=e.referSpeed[a]*e.referDir[a],e.path[a]=e.path[a-2]+e.offset[a],Math.abs(e.offset[a])>=i&&(e.offset[a]=i*e.referDir[a],e.referDir[a]=-e.referDir[a],e.referSpeed[a]=Math.random()*(.6-.4)+.4);for(let t of n)e.offset[t]+=e.referSpeed[t]*e.referDir[t],e.path[t]=e.path[t+2]+e.offset[t],Math.abs(e.offset[t])>=i&&(e.offset[t]=i*e.referDir[t],e.referDir[t]=-e.referDir[t],e.referSpeed[t]=Math.random()*(.6-.4)+.4);printWave(e),requestAnimationFrame(()=>animWave(e,t,n))}function printWave(e){e.classList.contains("wave-top__path")?e.setAttribute("d",`M 0 0\n\t\t\t V ${e.path[0]}\n\t\t\t C ${e.path[1]} ${e.path[2]} ${e.path[3]} ${e.path[4]} ${e.path[5]} ${e.path[6]}\n\t\t\t S ${e.path[7]} ${e.path[8]} ${e.path[9]} ${e.path[10]}\n\t\t\t S ${e.path[11]} ${e.path[12]} ${e.path[13]} ${e.path[14]}\n\t\t\t V 0\n\t\t\t H 0 Z`):e.setAttribute("d",`M 0 ${e.path[0]}\n\t\t\t V ${e.path[1]}\n\t\t\t C ${e.path[2]} ${e.path[3]} ${e.path[4]} ${e.path[5]} ${e.path[6]} ${e.path[7]}\n\t\t\t S ${e.path[8]} ${e.path[9]} ${e.path[10]} ${e.path[11]}\n\t\t\t S ${e.path[12]} ${e.path[13]} ${e.path[14]} ${e.path[15]}\n\t\t\t V 149\n\t\t\t H 0 Z`)}function parallax(){document.querySelectorAll(".parallax").forEach(e=>{const t=e.closest(".section").getBoundingClientRect();if(t.top-innerHeight>0||t.bottom<0)return;const n=e.dataset.perspective,i=t.top/n;e.style.transform=`translateY(${i}px)`})}function sliderInit(){const e=document.querySelector(".slider"),t=e.querySelector(".slider__left-button"),n=e.querySelector(".slider__right-button"),i=e.querySelectorAll(".slider__item"),r=e.querySelector(".slider__points-block");e.step=0,e.itemsNum=i.length;for(let e=0;e<i.length;e++){const t=document.createElement("div");t.className="slider-point",0==e&&t.classList.add("focus"),r.append(t)}t.addEventListener("click",()=>moveSlide(e,-1)),n.addEventListener("click",()=>moveSlide(e,1))}function moveSlide(e,t){if(isAnimating)return;isAnimating=!0,setTimeout(()=>isAnimating=!1,HOVERTIME);const n=e.querySelector(".slider__tape");e.step+=t,e.step=e.step===e.itemsNum?0:e.step,e.step=e.step<0?e.itemsNum-1:e.step,updateSliderPoints(e),n.style.transform=`translateX(-${100*e.step}%)`}function updateSliderPoints(e){const t=e.querySelector(".slider__points-block"),n=t.querySelectorAll(".slider-point");t.querySelector(".slider-point.focus").classList.remove("focus"),n[e.step].classList.add("focus")}function isSlider(){if(curSlider!=innerWidth<=650&&(curSlider=!curSlider,innerWidth>650)){const e=document.querySelector(".slider");e.querySelector(".slider__tape").style.transform="",e.step=0,updateSliderPoints(e)}}function teamCardTilte(){const e=document.querySelector(".team__slider-tape").querySelectorAll(".team-card__img-block");e.forEach(e=>e.addEventListener("mouseenter",()=>{innerWidth<=650||(e.style.zIndex="1")})),e.forEach(e=>e.addEventListener("mousemove",t=>{if(innerWidth<=650)return;const n=e.querySelector(".team__name"),i=e.getBoundingClientRect(),r=i.left,s=i.top,a=t.clientX-r,o=t.clientY-s,c=i.width/2,l=i.height/2,u=6*((a-c)/c),d=6*((o-l)/l);e.style.transform=`rotateY(${u}deg) rotateX(${-d}deg)`,n.style.left=1*u-30+"px",n.style.bottom=-30-1*d+"px"})),e.forEach(e=>e.addEventListener("mouseleave",()=>{const t=e.querySelector(".team__name");e.style.transform="",e.style.zIndex="",t.style.left="-30px",t.style.bottom="-30px"}))}function cactusInit(){const e=document.querySelector(".cactus__container");e.addEventListener("click",()=>cactusAnim(e))}function cactusAnim(e){const t=e.querySelector(".cactus__body");e.classList.remove("ready"),t.classList.add("start"),setTimeout(()=>{t.classList.add("hide"),setTimeout(()=>{t.classList.remove("start","hide"),setTimeout(()=>e.classList.add("ready"),HOVERTIME)},HOVERTIME+2500)},HOVERTIME)}function ufoRayInit(){const e=document.querySelector(".ufo__container"),t=e.querySelector(".ufo__body"),n=e.querySelector(".ufo__ray");n.path=splitSvgPath(n.getAttribute("d")),n.rightPos=n.path[6],n.diff=n.path[4]-n.rightPos,t.addEventListener("mouseenter",()=>startRay(n,0,1e3)),t.addEventListener("mouseleave",()=>stopRay(n))}function startRay(e,t,n){e.zTime=Date.now(),isRayAnimating=!0,e.classList.add("animating"),moveRay(e,t,n,-1)}function moveRay(e,t,n,i){const r=Math.min((Date.now()-e.zTime)/n,1);let s=cubikBezier(r);i<0&&(s=1-s),e.path[6]=(e.rightPos-t)*s,e.path[4]=e.path[6]+e.diff,printRay(e),1===r&&(i=-i,e.zTime=Date.now()),isRayAnimating?requestAnimationFrame(()=>moveRay(e,t,n,i)):(e.path[6]=e.rightPos,e.path[4]=e.path[6]+e.diff,printRay(e))}function stopRay(e){isRayAnimating=!1,e.classList.remove("animating")}function printRay(e){e.setAttribute("d",`M ${e.path[0]} ${e.path[1]}\n\t\t L ${e.path[2]} ${e.path[3]}\n\t\t L ${e.path[4]} ${e.path[5]}\n\t\t H ${e.path[6]}\n\t\t L ${e.path[7]} ${e.path[8]} Z`)}function getHeaderHeight(){return document.querySelector(".header").clientHeight}function getNumber(e){return+e.replace(/[^+\d]/g,"")}function getTranslateX(e){const t=window.getComputedStyle(e);return new WebKitCSSMatrix(t.transform).e}function getTranslateY(e){const t=window.getComputedStyle(e);return new WebKitCSSMatrix(t.transform).f}function isMobile(){return innerWidth<=1e3}function splitSvgPath(e){let t=e.split(/\s+/);return t=t.filter(e=>+e),t=t.map(e=>+e),t}function cubikBezier(e){return-(Math.cos(Math.PI*e)-1)/2}header&&(headerBackgroundColor(),svgStrokeInit(),navCurSection(),navCurFeatures(),logoAnimInit(),anchorLinksInit(),stickyBehaviour(),mainscreenRectInit(),heartInit(),runClientsInit(),wavesInit(),parallax(),sliderInit(),teamCardTilte(),cactusInit(),ufoRayInit(),window.addEventListener("load",()=>{scrollAnimations()}),document.addEventListener("scroll",()=>{headerBackgroundColor(),scrollAnimations(),navCurSection(),navCurFeatures(),requestAnimationFrame(()=>stickyBehaviour()),parallax()}),window.addEventListener("resize",()=>{changeDevice(),isSlider()})),header&&(menuBtn.addEventListener("click",()=>{isAnimating||(isAnimating=!0,setTimeout(()=>isAnimating=!1,HOVERTIME),menu.classList.add("show"))}),menu.addEventListener("click",e=>{isAnimating||(isAnimating=!0,setTimeout(()=>isAnimating=!1,HOVERTIME),e.target.closest(".popup__body")||menu.classList.remove("show"))}));